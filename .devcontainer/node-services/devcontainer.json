{
    "name": "Node Services Dev (Monorepo)",
    // 指向你的基礎 docker-compose.yml 和 override 檔案
    "dockerComposeFile": [
        "../../docker-compose.yml", // 相對路徑指向專案根目錄
        "../../docker-compose.override.yml" // 明確包含 override 文件
    ],
    // 指定 Docker Compose 文件中哪個服務作為 Dev Container 的主要環境
    "service": "node-services",
    // 指定 VS Code 在容器內開啟哪個資料夾作為工作區
    // 這應與 docker-compose.override.yml 中 volumes 的目標路徑一致
    "workspaceFolder": "/workspace",
    "updateRemoteUserUID": false, 
    "customizations": {
        "vscode": {
            "extensions": [
                "dbaeumer.vscode-eslint",
                "esbenp.prettier-vscode",
                "ms-vscode.vscode-typescript-next",
                "ms-azuretools.vscode-docker"
            ]
        }
    },
    // --- Container Lifecycle ---
    // 轉發端口
    "forwardPorts": [
        3000,   // API Gateway
        4000    // WebSocket
    ],
    // 指定需要隨 Dev Container 一起啟動的其他服務
    "runServices": [
        "db",
        "backend-python",
        "frontend"
    ],
    // "postCreateCommand": "pnpm install",
    "postStartCommand": "export PATH=\"/home/vscode/.local/bin:$PATH\"",
    "postCreateCommand": "sudo chown -R vscode:vscode /workspace",
    "remoteUser": "vscode",
    "containerEnv": {
        "NODE_ENV": "development"
    }
}